---
import HoverUnderline from "../reusable/HoverUnderline.astro";

export interface Props {
	href: string;
}

const { href } = Astro.props as Props;

const page = "/" + Astro.url.pathname.split("/")[1];
const referer = Astro.request.headers.get("referer");
let fromPage = "";
if (referer) {
	const url = new URL(referer ?? "");
	fromPage = url.pathname;
}

const active = href === page;
const from = href === fromPage;
---

<li>
	<a
		href={href}
		class="font-mono text-sm text-inherit whitespace-nowrap hover:text-sky-800 group dark:hover:text-sky-200"
		class:list={[{ active, from }]}
		rel="prefetch"
	>
		<HoverUnderline>
			<slot />
		</HoverUnderline>
	</a>
</li>

<style>
	a.active {
		font-weight: semibold;
		animation: activate 200ms forwards;
	}
	a.from {
		animation: activate 200ms reverse forwards;
	}

	@keyframes activate {
		0% {
			font-weight: 300;
		}
		100% {
			font-weight: 600;
		}
	}
</style>
